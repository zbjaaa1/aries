From b6c03bb7dfb55a6688471310dd35656456b58d85 Mon Sep 17 00:00:00 2001
From: Arian <arian.kulmer@web.de>
Date: Thu, 29 Apr 2021 18:01:25 +0200
Subject: [PATCH] input: touchscreen: xiaomi: Add new touch gamemode support

Change-Id: I8d9d608d46ee28cd308aa3676ddef877ccf55104

Source: https://github.com/LineageOS/android_kernel_xiaomi_sm6150/commit/b6c03bb7dfb55a6688471310dd35656456b58d85
---
 drivers/input/touchscreen/xiaomi/Kconfig        | 9 +++++++++
 drivers/input/touchscreen/xiaomi/xiaomi_touch.h | 8 ++++++++
 2 files changed, 17 insertions(+)

diff --git a/drivers/input/touchscreen/xiaomi/Kconfig b/drivers/input/touchscreen/xiaomi/Kconfig
index 134752b0d30f..924d9a0f8daa 100755
--- a/drivers/input/touchscreen/xiaomi/Kconfig
+++ b/drivers/input/touchscreen/xiaomi/Kconfig
@@ -24,4 +24,13 @@ config TOUCHSCREEN_XIAOMI_TOUCHFEATURE_GAMEMODE
 
 	  If unsure, say N.
 
+	  To compile this driver as a module, choose M here:
+config NEW_TOUCH_GAMEMODE
+	tristate "Xiaomi New Touch GameMode"
+	depends on TOUCHSCREEN_GOODIX_GTX9896_I2C
+	help
+	  Say Y here if you enable xiaomi touch feature.
+
+	  If unsure, say N.
+
 	  To compile this driver as a module, choose M here:
diff --git a/drivers/input/touchscreen/xiaomi/xiaomi_touch.h b/drivers/input/touchscreen/xiaomi/xiaomi_touch.h
index 1fadedfedb3d..bac464c821da 100755
--- a/drivers/input/touchscreen/xiaomi/xiaomi_touch.h
+++ b/drivers/input/touchscreen/xiaomi/xiaomi_touch.h
@@ -75,11 +75,19 @@ enum MODE_CMD {
 enum  MODE_TYPE {
 	Touch_Game_Mode        = 0,
 	Touch_Active_MODE      = 1,
+#ifdef CONFIG_NEW_TOUCH_GAMEMODE
+	Touch_Tap_Sensitivity	    = 2,
+	Touch_Follow_Performance    = 3,
+	Touch_Aim_Sensitivity       = 4,
+	Touch_Tap_Stability         = 5,
+	Touch_Expert_Mode           = 6,
+#else
 	Touch_UP_THRESHOLD     = 2,
 	Touch_Tolerance        = 3,
 	Touch_Wgh_Min          = 4,
 	Touch_Wgh_Max          = 5,
 	Touch_Wgh_Step         = 6,
+#endif
 	Touch_Edge_Filter      = 7,
 	Touch_Panel_Orientation = 8,
 	Touch_Report_Rate      = 9,
